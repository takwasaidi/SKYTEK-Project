<div class="reservation-container container mt-4">

  <!-- Toggle boutons -->
  <div class="reservation-view-toggle mb-4 text-center">
    <button 
      class="btn me-2"
      [ngClass]="{'btn-custom': !showAllEntreprise, 'btn-outline-custom': showAllEntreprise}"
      (click)="showAllEntreprise = false; loadReservations();">
      Mes r√©servations
    </button>
    <button 
      class="btn"
      [ngClass]="{'btn-custom': showAllEntreprise, 'btn-outline-custom': !showAllEntreprise}"
      (click)="showAllEntreprise = true; loadReservations();">
      R√©servations entreprise
    </button>
  </div>
  <!-- üîπ Message g√©n√©ral d‚Äôinformation -->
  <div *ngIf="!showAllEntreprise" class="alert alert-info text-center mb-3">
    ‚ö†Ô∏è Vous ne pouvez pas annuler une r√©servation si le d√©but est pr√©vu dans moins de <strong>2 heures</strong>.
  </div>
  <!-- Liste des r√©servations sous forme de cartes -->
  <div class="row g-3">
    <div *ngFor="let res of reservations | paginate: { itemsPerPage: 8, currentPage: p }" class="col-md-6 col-lg-4">
     

      <div class="card reservation-card p-2"
           style="border-left: 5px solid #5bc0de;">
        <div class="card-body">
          <h5 class="card-title">{{ res.salle.nom }}</h5>
          <h6 class="card-subtitle mb-2 text-muted">{{ res.user.firstname }} {{ res.user.lastname }}</h6>

          <p class="card-text mb-1">
            <strong>Date:</strong> {{ res.dateReservation | date:'dd/MM/yyyy' }}
          </p>
          <p class="card-text mb-1">
            <strong>Heures:</strong> {{ res.heureDebut }} - {{ res.heureFin }}
          </p>

          <span class="badge badge-custom">
            {{ showAllEntreprise ? 'Entreprise' : 'Personnel' }}
          </span>

       <!-- üîπ Bouton annuler uniquement pour les r√©servations personnelles -->
<div class="mt-3 text-end" *ngIf="!showAllEntreprise">
  <button class="btn btn-sm" 
          style="background:rgb(234,46,94); color:white; border-radius:6px;"
          (click)="annulerReservation(res.id!)"
          [disabled]="!canCancel(res)">
     Annuler
  </button>
</div>


        </div>
      </div>
    </div>
  </div>

  <!-- Pagination centr√©e -->
  <div class="d-flex justify-content-center mt-4">
    <pagination-controls 
      (pageChange)="p = $event"
      previousLabel="Pr√©c√©dent"
      nextLabel="Suivant">
    </pagination-controls>
  </div>

</div>

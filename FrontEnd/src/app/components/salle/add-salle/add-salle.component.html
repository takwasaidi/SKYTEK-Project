<div class="form-wrapper">
  <div class="card form-card">
    <h2 class="form-title">Ajouter une Salle</h2>

    <form (ngSubmit)="onSubmit()" #salleForm="ngForm" class="form-body">

      <!-- Ligne 1 : Nom + Emplacement -->
      <div class="form-row">
        <div class="form-group">
          <label for="nom">Nom</label>
          <input
            id="nom"
            type="text"
            name="nom"
            [(ngModel)]="salle.nom"
            required
            #nom="ngModel"
            placeholder="Nom de la salle"
            class="form-control"
          />
          <div *ngIf="nom.invalid && nom.touched" class="text-danger">Le nom est requis.</div>
        </div>

        <div class="form-group">
          <label for="emplacement">Emplacement</label>
          <input
            id="emplacement"
            type="text"
            name="emplacement"
            [(ngModel)]="salle.emplacement"
            required
            #emplacement="ngModel"
            placeholder="Adresse ou localisation"
            class="form-control"
          />
          <div *ngIf="emplacement.invalid && emplacement.touched" class="text-danger">L’emplacement est requis.</div>
        </div>
      </div>

      <!-- Ligne 2 : Capacité + Tarif -->
      <div class="form-row">
        <div class="form-group">
          <label for="capacite">Capacité</label>
          <input
            id="capacite"
            type="number"
            name="capacite"
            [(ngModel)]="salle.capacite"
            required
            #capacite="ngModel"
            placeholder="Nombre de places"
            class="form-control"
          />
          <div *ngIf="capacite.invalid && capacite.touched" class="text-danger">La capacité est requise.</div>
        </div>

        <div class="form-group">
          <label for="tarifHoraire">Tarif horaire</label>
          <input
            id="tarifHoraire"
            type="number"
            step="0.01"
            name="tarifHoraire"
            [(ngModel)]="salle.tarifHoraire"
            required
            #tarifHoraire="ngModel"
            placeholder="Tarif en DT"
            class="form-control"
          />
          <div *ngIf="tarifHoraire.invalid && tarifHoraire.touched" class="text-danger">Le tarif est requis.</div>
        </div>
      </div>

      <!-- Ligne 3 : Checkboxes -->
      <div class="checkbox-group">
        <label class="checkbox-label">
          <input type="checkbox" name="estDisponible" [(ngModel)]="salle.estDisponible" />
          Disponible
        </label>
        <label class="checkbox-label">
          <input type="checkbox" name="enMaitenance" [(ngModel)]="salle.enMaitenance" />
          En maintenance
        </label>
      </div>

      <!-- Ligne 4 : Images -->
      <div class="form-group">
        <label for="images">Images</label>
        <input id="images" type="file" (change)="onFileSelected1($event)" multiple class="form-control" />
      </div>

      <!-- Prévisualisation des images -->
      <div class="image-preview-container" *ngIf="salle.salleImages.length > 0">
        <div class="image-preview" *ngFor="let file of salle.salleImages; let i = index">
          <button type="button" class="btn-remove" (click)="removeImages(i)">×</button>
          <img [src]="file.url" alt="Image salle" />
        </div>
      </div>

      <!-- Ligne 5 : Équipements -->
      <div class="form-group">
        <label for="equipements">Équipements disponibles</label>
        <select
          id="equipements"
          multiple
          [(ngModel)]="salle.equipmentIds"
          name="equipements"
          class="form-control"
          #equipements="ngModel"
        >
          <option *ngFor="let eq of equipments" [ngValue]="eq.id">{{ eq.nom }}</option>
        </select>
        <div *ngIf="equipmentError" class="text-danger">
          Veuillez sélectionner des équipements.
        </div>
      </div>

      <!-- Bouton Submit -->
      <button type="submit" class="btn btn-primary btn-block mt-3">Ajouter Salle</button>
    </form>
  </div>
</div>
